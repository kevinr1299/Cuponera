<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<meta charset="UTF-8">
<title>Lista de promociones</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
<link rel="stylesheet" th:href="@{/css/sweetAlert2.min.css}">
<link rel="stylesheet" th:href="@{/css/page.css}">
<script th:src="@{/js/jquery.min.js}" type="text/javascript"></script>
<script th:src="@{/js/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{/js/sweetAlert2.min.js}" type="text/javascript"></script>
</head>
<body>
	<div class="container-fluid">
		<div class="row">
			<div id="sidebar" class="col-md-2 col-sm-12 position-fixed bg-white">
				<div class="row">
					<div class="col-sm-12 text-center pt-2">
						<img th:src="@{/img/flyers.png}">
					</div>
				</div>
				<div class="row">
					<div class="col-sm-12 text-center">
						<h2 class="text-center">Cuponera</h2>
						<p class="text-center">Empresa ofertante</p>
					</div>
				</div>
				<div class="row">
					<ul class="list-group list-group-flush col-sm-12 p-0 m-0">
						<li class="list-group-item active"><a
							class="nav-link text-white" href="/oferta">Ofertas</a></li>
						<li class="list-group-item"><a class="nav-link text-dark"
							href="/empleado">Empleados</a></li>
						<li class="list-group-item"><a class="nav-link text-dark"
							href="javascript: document.logoutForm.submit()" role="menuitem">Cerrar
								sesión</a>
							<form name="logoutForm" th:action="@{/logout}" method="post"
								th:hidden="true">
								<input hidden type="submit" value="Sign Out" />
							</form></li>
					</ul>
				</div>
			</div>
			<div class="col-md-10 offset-md-2 col-sm-12">
				<div class="row">
					<div class="col-sm-12 bg-dark p-2">
						<h1 class="text-white">Ofertas</h1>
						<ol class="breadcrumb bg-dark p-0 ">
							<li class="breadcrumb-item text-white">Empresa</li>
							<li class="breadcrumb-item"><a class="text-white"
								href="/oferta">Ofertas</a></li>
							<li class="breadcrumb-item"><a class="text-white"
								th:href="@{/oferta/{id}/actualizar(id=${oferta.id})}">Modificar</a></li>
						</ol>
					</div>
				</div>

				<div class="row">
					<div class="col-sm-12 p-5">
						<div class="row">
							<div class="col-sm-12 col-md-6 offset-md-3 bg-light rounded p-2">
								<h3 class="text-center">Actualizar promoción</h3>
								<form th:action="@{/oferta/actualizar}" method="post"
									th:object="${oferta}" enctype="multipart/form-data">
									<p class="text-center">Campos requeridos (*)</p>
									<ul th:if="${#fields.hasErrors('*')}"
										class="alert alert-danger">
										<li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
									</ul>
									<div class="col-sm-12">
										<div class="row">
											<div class="col-md-6 col-sm-12">
												<div class="form-group">
													<label for="titulo">Titulo:</label>
													<div class="input-group mb-2">
														<div class="input-group-prepend">
															<div class="input-group-text">*</div>
														</div>
														<input type="text" class="form-control" name="titulo"
															id="titulo" th:field="*{titulo}"
															placeholder="Ingresa el titulo">
													</div>
												</div>

											</div>
											<div class="col-md-6 col-sm-12">
												<div class="form-group">
													<label for="disponibles">Número de cupones:</label>
													<div class="input-group mb-3">
														<div class="input-group-prepend">
															<div class="input-group-text">
																<input type="checkbox" value="1" id="limitar"
																	title="Limitar">
															</div>
														</div>
														<input type="text" id="disponibles" class="form-control"
															th:field="*{disponibles}">
													</div>
												</div>

											</div>
										</div>
										<div class="row">
											<div class="col-md-6 col-sm-12">
												<div class="form-group">
													<label for="regular">Precio regular:</label>
													<div class="input-group mb-2">
														<div class="input-group-prepend">
															<div class="input-group-text">*</div>
														</div>
														<input type="number" class="form-control" name="regular"
															id="regular" th:field="*{precioRegular}">
													</div>
												</div>

											</div>
											<div class="col-md-6 col-sm-12">
												<div class="form-group">
													<label for="oferta">Precio de oferta:</label>
													<div class="input-group mb-2">
														<div class="input-group-prepend">
															<div class="input-group-text">*</div>
														</div>
														<input type="number" class="form-control" name="oferta"
															id="oferta" th:field="*{precioOferta}">
													</div>
												</div>

											</div>
										</div>
										<div class="row">
											<div class="col-md-6 col-sm-12">
												<div class="form-group">
													<label for="inicio">Fecha de inicio:</label>
													<div class="input-group mb-2">
														<div class="input-group-prepend">
															<div class="input-group-text">*</div>
														</div>
														<input type="date" class="form-control" name="inicio"
															id="inicio" th:field="*{fechaInicio}">
													</div>
												</div>

											</div>
											<div class="col-md-6 col-sm-12">
												<div class="form-group">
													<label for="fin">Fecha de finalización:</label>
													<div class="input-group mb-2">
														<div class="input-group-prepend">
															<div class="input-group-text">*</div>
														</div>
														<input type="date" class="form-control" name="fin"
															id="fin" th:field="*{fechaFin}">
													</div>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-md-6 col-sm-12">
												<div class="form-group">
													<label for="limite">Fecha limite de uso:</label>
													<div class="input-group mb-2">
														<div class="input-group-prepend">
															<div class="input-group-text">*</div>
														</div>
														<input type="date" class="form-control" name="limite"
															id="limite" th:field="*{fechaLimite}">
													</div>
												</div>
											</div>
											<div class="col-md-6 col-sm-12">
												<div class="form-group">
													<label for="descripcion">Descripción:</label>
													<div class="input-group mb-2">
														<div class="input-group-prepend">
															<div class="input-group-text">*</div>
														</div>
														<input type="text" class="form-control" name="descripcion"
															id="descripcion" th:field="*{descripcion}"
															placeholder="Ingresa la descripción">
													</div>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-sm-6">
												<img th:src="@{/uploads/{img}(img=${oferta.img})}" class="img-fluid">
											</div>
											<div class="col-sm-6">
												<div class="form-group">
													<label for="img">Imagen:</label>
													<div class="input-group mb-2">
														<input type="file" th:field="*{fileData}"
															accept="image/png, .jpg, .jpeg" value="* Elegir">
													</div>
												</div>
											</div>
										</div>
										<input type="hidden" th:field="*{id}">
										<input type="hidden" th:field="*{img}">
										<center class="mt-1">
											<input type="submit" value="Modificar"
												class="btn btn-outline-primary mr-1"> <a
												href="/oferta" class="btn btn-danger">Cancelar</a>
										</center>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script>
	$(document).ready(
			function() {
				if ($('#disponibles').val() != ""
						&& $('#disponibles').val() != "Ilimitados") {
					$('#limitar').prop('checked', true);
				} else {
					$('#disponibles').prop('readonly', true);
					$('#disponibles').val('Ilimitados');

				}

				$('#limitar').change(function() {
					var lim = $('#limitar:checked').val();
					if (lim == 1) {
						$('#disponibles').prop('readonly', false);
						$('#disponibles').val(0);
					} else {
						$('#disponibles').prop('readonly', true);
						$('#disponibles').val('Ilimitados');
					}
				})
			})
</script>
</html>